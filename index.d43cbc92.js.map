{"mappings":"AAGAA,eAAeC,EAAWC,EAAO,GAC7B,MAAMC,QAAiBC,MAAM,8GAA8GF,gBACrIG,QAAaF,EAASG,OAI5B,OAHAC,QAAQC,IAAIH,EAAKI,SAUnB,SAAuBC,GACrBC,EAAQC,UAAY,GAEpB,MACMC,EAASH,EACZI,KAAIC,IACH,MAAMC,YAAEA,EAAWC,GAAEA,EAAEC,MAAEA,EAAKC,aAAEA,GAAiBJ,EACjD,IAAKI,EACH,MAAO,GAKT,MAAO,oFAE6BF,0DALlB,mCAAmCD,8DAOxBE,6CANN,IAAIE,KAAKD,GAAcE,iEAU7C,IAEFC,KAAK,IAERX,EAAQY,mBAAmB,YAAaV,EAC1C,CAnCEW,CAAcnB,EAAKI,SAsCrB,SAA0BgB,GACxB,MAAMC,EAAoB,GAC1B,IAAIC,EAAc,GACdC,EAAY,EACZC,EAAUJ,EAEd,GAAIA,EAAaC,EAAmB,CAClC,MAAMI,EAAoBJ,EAAoB,EACxCK,EAAkBC,KAAKC,MAAMH,EAAoB,GAGnDI,GAAeH,EAAkB,EACnCF,EAAUH,EAAoB,EACrBQ,GAAeT,EAAaM,EACrCH,EAAYH,EAAaC,EAAoB,GAE7CE,EAAYM,EAAcH,GAPbD,EAAoB,GAAM,EAOe,EAAI,GAC1DD,EAAUK,EAAcH,GAG1BJ,GAAe,oEAEXC,EAAY,IACdD,GAAe,kDACXC,EAAY,IACdD,GAAe,+CAInB,IAAK,IAAIQ,EAAIP,EAAWO,GAAKN,EAASM,IACpCR,GAAe,mCAAmCQ,kBAGhDN,EAAUJ,IACRI,EAAUJ,EAAa,IACzBE,GAAe,8CAEjBA,GAAe,mCAAmCF,mBAGpDE,GAAe,mEACjB,MACE,IAAK,IAAIQ,EAAI,EAAGA,GAAKV,EAAYU,IAC/BR,GAAe,mCAAmCQ,kBAItDC,EAASxB,UAAYe,EAEIU,MAAMC,KAAKF,EAASG,iBAAiB,iBAE7CC,SAAQC,IACvBA,EAAOC,iBAAiB,SAAS,KAC/B,MAAMC,EAAaC,SAASH,EAAOI,aAC9BC,MAAMH,GAIAF,EAAOM,UAAUC,SAAS,eAC/Bd,EAAc,IAChBA,IACAjC,EAAWiC,GACXe,KAEOR,EAAOM,UAAUC,SAAS,gBAC/Bd,EAAcT,IAChBS,IACAjC,EAAWiC,GACXe,MAbFf,EAAcS,EACd1C,EAAWiC,GACXe,IAYA,GAEJ,GAEJ,CA9GEC,CAAiB7C,EAAK8C,aACf9C,CACT,CAEA,MAAMM,EAAUyC,SAASC,cAAc,YACjCjB,EAAWgB,SAASC,cAAc,cACxC,IAAInB,EAAc,EA0GlB,SAASe,IACPK,OAAOC,SAAS,CAAEC,IAAK,EAAGC,SAAU,UACtC,CAEAxD","sources":["src/index.js"],"sourcesContent":["import './sass/main.scss';\n\n\nasync function fetchFilms(page = 1) {\n    const response = await fetch(`https://api.themoviedb.org/3/trending/all/day?language=en-US&api_key=6fc014c055bacb8460b83603c43b9093&page=${page}&per_page=9`);\n    const data = await response.json();\n    console.log(data.results);\n    renderGallery(data.results);\n    renderPagination(data.total_pages);\n    return data;\n  }\n  \n  const gallery = document.querySelector('.gallery');\n  const pageList = document.querySelector('.page-list');\n  let currentPage = 1;\n  \n  function renderGallery(films) {\n    gallery.innerHTML = '';\n  \n    const filmsPerPage = 9;\n    const markup = films\n      .map(film => {\n        const { poster_path, id, title, release_date } = film;\n        if (!release_date) {\n          return ''; // Pomijanie filmu bez daty produkcji\n        }\n        const posterUrl = `https://image.tmdb.org/t/p/w500/${poster_path}`;\n        const productionYear = new Date(release_date).getFullYear();\n  \n        return `\n          <a class=\"gallery__link\">\n            <div class=\"gallery-item\" id=\"${id}\">\n              <img class=\"gallery-item__img\" src=\"${posterUrl}\" loading=\"lazy\" />\n              <p class=\"info-item\">${title}</p>\n              <p class=\"info-item\">${productionYear}</p>\n            </div>\n          </a>\n        `;\n      })\n      .join('');\n  \n    gallery.insertAdjacentHTML('beforeend', markup);\n  }\n  \n  \n  function renderPagination(totalPages) {\n    const maxVisibleButtons = 11;\n    let pageButtons = '';\n    let startPage = 1;\n    let endPage = totalPages;\n  \n    if (totalPages > maxVisibleButtons) {\n      const middleButtonCount = maxVisibleButtons - 4;\n      const sideButtonCount = Math.floor(middleButtonCount / 2);\n      const isEven = middleButtonCount % 2 === 0;\n  \n      if (currentPage <= sideButtonCount + 1) {\n        endPage = maxVisibleButtons - 2;\n      } else if (currentPage >= totalPages - sideButtonCount) {\n        startPage = totalPages - maxVisibleButtons + 3;\n      } else {\n        startPage = currentPage - sideButtonCount + (isEven ? 1 : 0);\n        endPage = currentPage + sideButtonCount;\n      }\n  \n      pageButtons += `<li><button class=\"page-button prev-button\">&laquo;</button></li>`;\n  \n      if (startPage > 1) {\n        pageButtons += `<li><button class=\"page-button\">1</button></li>`;\n        if (startPage > 2) {\n          pageButtons += `<li><span class=\"ellipsis\">...</span></li>`;\n        }\n      }\n  \n      for (let i = startPage; i <= endPage; i++) {\n        pageButtons += `<li><button class=\"page-button\">${i}</button></li>`;\n      }\n  \n      if (endPage < totalPages) {\n        if (endPage < totalPages - 1) {\n          pageButtons += `<li><span class=\"ellipsis\">...</span></li>`;\n        }\n        pageButtons += `<li><button class=\"page-button\">${totalPages}</button></li>`;\n      }\n  \n      pageButtons += `<li><button class=\"page-button next-button\">&raquo;</button></li>`;\n    } else {\n      for (let i = 1; i <= totalPages; i++) {\n        pageButtons += `<li><button class=\"page-button\">${i}</button></li>`;\n      }\n    }\n  \n    pageList.innerHTML = pageButtons;\n  \n    const pageButtonsArray = Array.from(pageList.querySelectorAll('.page-button'));\n  \n    pageButtonsArray.forEach(button => {\n      button.addEventListener('click', () => {\n        const pageNumber = parseInt(button.textContent);\n        if (!isNaN(pageNumber)) {\n          currentPage = pageNumber;\n          fetchFilms(currentPage);\n          scrollToTop();\n        } else if (button.classList.contains('prev-button')) {\n          if (currentPage > 1) {\n            currentPage--;\n            fetchFilms(currentPage);\n            scrollToTop();\n          }\n        } else if (button.classList.contains('next-button')) {\n          if (currentPage < totalPages) {\n            currentPage++;\n            fetchFilms(currentPage);\n            scrollToTop();\n          }\n        }\n      });\n    });\n  }\n  \n  function scrollToTop() {\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  }\n  \n  fetchFilms();\n  "],"names":["async","$1cb340a3d58589e5$var$fetchFilms","page","response","fetch","data","json","console","log","results","films","$1cb340a3d58589e5$var$gallery","innerHTML","markup","map","film","poster_path","id","title","release_date","Date","getFullYear","join","insertAdjacentHTML","$1cb340a3d58589e5$var$renderGallery","totalPages","maxVisibleButtons","pageButtons","startPage","endPage","middleButtonCount","sideButtonCount","Math","floor","$1cb340a3d58589e5$var$currentPage","i","$1cb340a3d58589e5$var$pageList","Array","from","querySelectorAll","forEach","button","addEventListener","pageNumber","parseInt","textContent","isNaN","classList","contains","$1cb340a3d58589e5$var$scrollToTop","$1cb340a3d58589e5$var$renderPagination","total_pages","document","querySelector","window","scrollTo","top","behavior"],"version":3,"file":"index.d43cbc92.js.map"}